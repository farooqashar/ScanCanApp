<meta charset="utf-8" emacsmode="-*- markdown -*-"> <link rel="stylesheet" href="https://casual-effects.com/markdeep/latest/journal.css?">

                          **Danfoss Scan Can App**

                          <p>&nbsp;</p>
                          <p>&nbsp;</p>

![Final Working System Demo - ESP32](https://www.youtube.com/watch?v=tjBdE3a6q5g)
![Final Working System Demo - Website](https://www.youtube.com/watch?v=-WjyS4P5pdI)

# General Project Overview

## Synopsis

This project aims to utilize the power of augmented reality in order to build an application desgined to scan various soda cans and augment their nutritional information. The end product is an application designed in Vuforia using the Unity Engine. This application can be deployed to a device for a demonstration showing an augmented reality approach of identifying a can correctly out of 4 possible options in addition to displaying various information about the identified can, such as the price, calories, and sugar content. 

## Goals and Objectives

* Choose an augmented reality development software kit
* Investigate Vuforia (alternative: Wikitude)
* Set up an example working program
* Modify the example program
* Create a working application in Vuforia using the Unity engine in that can recognize 4 cans and augment various information about the cans
* Establish a team-oriented work structure and breakdown

## Deliverables:

* Register for a Vuforia Account
* Register for a Vuforia license key (through Github)
* Download Unity software
* Install Vuforia Engine
* Choose between cloud storage versus local storage of targets
* Determined local storage as of the current state of the project)
* Create a new Unity Project
* Integrate the Vuforia Engine into the Unity Project
* Set up a blank working project with an AR Camera with no targets
* Find appropriate targets to the project
* Add appropriate targets to the project
* Choose between integrating an API for the cans’ data versus embedding fixed data
* Perform GET requests from an API or insert text elements to input the cans’ information
* Run simulations of the project
* Build and run the application 
* Iterate over many trials to change elements, modify software, change targets, and change end deployment targets.
* Establish a business model for the application
* Record a demonstration video

## Budget:

Vuforia offers a free option with its corporate watermark for its augmented reality software development kit. This will account for all of the budget, thus there is an expected budget of $0 for a working end product with a watermark. 


# Basic Functionality

The website can be accessed at <a href="https://mgningueasc4.github.io/608FinalWeb/">here</a>. The web site acts as a streamlined interface to access all of the features of Snespchat. Certain features, such as displaying the tags, seeing the user who created a post, as well as following the current user cannot be displayed on the ESP. The website directly interfaces with the server to access these features. A user is allowed to create a user or login upon entering the website. Both functions send the corresponding POST request to the server to validate the user’s credentials, as explained in “User Signup and Login.” The user is then able to view all of their posts, including the tags, as well as the creator of the post by sending a GET request to view the home profile’s feed. This sends one post at a time and thus must be repeated through the total number of posts in order to receive all of the posts. A user can also access their feed, which are all of the posts from other users whom the main user follows. This feature comes with the added functionality of being able to like/unlike posts as well as follow/unfollow the user by clicking on the username associated with the post. These buttons are responsible for sending POST requests that follow and like users. A user is also able to Create a post directly from the website. The user uploads an image as well as tag. If the user allows location services, the user's current location will automatically be used for the post. Once the user clicks "create post," the image is converted into base64 and then the information is sent as a POST request. A user can then view their most recent post on their home user posts page. Posts created from the ESP can also be viewed on the home user post page.

# Documentation

## Assumptions

* The user wants to have a login with the username and password.
* The user does not forget their username and password.
* The user only takes photographs.

## Design Choices
The project idea was narrowed down according to ideas, such as creativity, dynamic capabilities,workload, and the interesting factor, as shown in <a href="https://docs.google.com/spreadsheets/d/1Y9bIBptiCWfO4W7U3rdYBnQm-e-kpr-vEfvIVXaIHbE/edit#gid=0">this</a> spreadsheet:

The design choice of having a dual system of ESP32 and a dynamic webpage was made in order to make it more feasible and efficient for the user to interact with other people while not having to do everything on a small LCD screen. In addition, the quality of the user experience, such as liking photos, searching faster, and other features of the project, can be improved with the addition of a webpage. However, the entire experience on the webpage would also not be interesting and engaging to the user as this is already too common. Therefore, having features like logging in, taking a picture, and viewing photos on the ESP32/LCD was a clear design choice in order to make the end user experience unique.

The design choice of using a tilting mechanism for user login was made in order to quickly and efficiently allow a user to view the content that they need or to interact with the system. Speech and other methods were objectively slower in this regard.

The design choice of POSTing a camera picture representation was made in order to avoid the usage of SD cards and SD card readers, which would effectively take longer and be inefficient. Instead, the picture can be encoded to base64 representation, posted to the server, and then reversed back to a viewable format.

The design choice of using several buttons was made in order to not only make it less burden on the user, but also to allow for more user autonomy as more options are seemingly possible with more buttons for different functionalities.

## Challenges

There were many general challenges that the team encountered over the duration of the project.

**Connectivity:** There were issues with connecting the ESP32 to the home network due to various privacy settings. This also resulted in issues with connecting to APIs, such as the  Google Speech API. In addition, there were general issues with the previous code from 6.08 labs not working as intended.

**Memory:** Using the Google Speech API costed significant memory usage very early on in the project. Therefore, we decided to utilize the TiltType mechanism for the tags as well. With the addition of the camera, there was also more memory issues, especially with posting larger images to the server. There were issues with declaring large variables, large request buffers, and not enough space on the database on the server.

**Hardware:** The delayed arrival/access to hardware, especially the camera, phototransistor, and the white light diodes, made it difficult to implement the design of the project since initial setup and tests had to be delayed. This resulted in rushed design choices with the camera, picture capture, and picture POSTing.

Some design challenges included:

**Webpage Connectivity:** The webpage’s dynamic features, such as user login, viewing profile, liking photos, and querying photos, all required the webpage to work well with the server. There were some issues that prevented a smooth connection, such as the timing issue when uploading a picture from the website. When a user uploaded an image, the user wouldn’t be able to see images. Therefore it was imperative to ensure the web page used the time according to the last page refresh (the most current time) in order to view the most recent photos. There were also some individual issues with the webpage behaving differently with different browser options, such as https vs http.

**Camera and Camera Picture POSTing:** The integration of camera into the system late caused issues, such as working with the Arducam Libraries and SPI Interface Errors. Initially, the camera worked with a simple HTML template for taking a picture. However, working to integrate picture capture and posting was difficult as the Arducam library included other embedded features, which had to be parsed and narrowed down to our use case. Once the picture capture functionality was done, the POSTing of the image was difficult given the memory and space constraints on the ESP32 and the server. Through several test runs of POSTing picture representations, the best course of action for larger camera files was to send them in chunks and only send the base64 representation of any image.


# Software 

# Frequent Asked Questions

**What happens if a user is new to the network and does not have a password and username?**

The user can sign up for Snespchat from the initial welcome screen and create their username and password.

**Does the user have to login on the webpage?**

Yes, the website is also protected and the user would need to enter their username and password, which obviously stays the same whether the use logs in via the ESP32 or the webpage.

**What can the user do on the ESP32?**

The user can take a picture with the camera, view their profile, and query by tags.

**What if the user does not want to show their location when submitting a post?**

Then the post will default to the server’s location, which is in Garden City, Michigan.

# Team Details

## Team Members

**Ashar Farooq ‘23**

**Mohammadou R. Gningue ‘23**


## Team Communication and Accountability

We established a Discord server and a Facebook Messenger chat as both systems ensured that we do not miss team communications. In addition, we also created a mailing list (608team6@mit.edu) in order to make it easier to receive information to all of us. In terms of the weekly meeting times, we had worked out a flexible schedule, including 5 PM EDT/6 PM EDT on Wednesdays in addition to late nights(10 PM EDT) over the weekend. We would also meet right after our weekly deliverables check-ins and discuss our goals for next week. We had to take into account the timing constraints of all the team members, especially since some of us were in different time zones and countries. In terms of the accountability measures, we had set up a system where we can regularly message in the Discord chat about the progress of the deliverables starting on Monday and making sure that team members know what they are supposed to be doing.

<style class="fallback">body{visibility:hidden}</style><script>markdeepOptions={tocStyle:'medium'};</script>
<!-- Markdeep: --><script src="https://casual-effects.com/markdeep/latest/markdeep.min.js?" charset="utf-8"></script>
